# ì¶œê¸ˆ ê´€ë¦¬ ë©”ë‰´ êµ¬ì„± ê³„íšì„œ

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

- **ì‘ì„±ì¼**: 2025-10-15
- **ëª©ì **: Hot/Cold ë³¼íŠ¸ ë¦¬ë°¸ëŸ°ì‹±ì„ í†µí•©í•œ ì¶œê¸ˆ ê´€ë¦¬ ë©”ë‰´ êµ¬ì¡° ì„¤ê³„
- **ê´€ë ¨ Phase**: Phase 4 (ì™„ë£Œ) + Phase 5 (ì§„í–‰ ì˜ˆì •)
- **í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**: Hot 20% / Cold 80% ë¹„ìœ¨ ìœ ì§€, ì¶œê¸ˆ ì „í›„ ë¦¬ë°¸ëŸ°ì‹±

---

## ğŸ¯ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­

### í•µì‹¬ ì¶œê¸ˆ í”„ë¡œì„¸ìŠ¤

```
1. ê³ ê° ì¶œê¸ˆ ìš”ì²­
   â†“
2. íšŒì›ì‚¬ ë“±ë¡ ì£¼ì†Œ ê²€ì¦
   â†“
3. AML/ì»´í”Œë¼ì´ì–¸ìŠ¤ ê²€ì¦
   â†“
4. ğŸ†• Hot Wallet ì”ê³  í™•ì¸
   â”œâ”€ âœ… ì¶©ë¶„ â†’ Air-gap ì„œëª…ìœ¼ë¡œ ì´ë™
   â””â”€ âŒ ë¶€ì¡± â†’ Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹± í•„ìš”
       â†“
       Air-gap ì„œëª… (ë¦¬ë°¸ëŸ°ì‹±)
       â†“
       Cold â†’ Hot ì´ì²´ ì™„ë£Œ
       â†“
       ë‹¤ì‹œ ì¶œê¸ˆ í”„ë¡œì„¸ìŠ¤ ì§„í–‰
   â†“
5. Air-gap ì„œëª… (ì¶œê¸ˆ)
   â†“
6. ì¶œê¸ˆ ì‹¤í–‰ (ë¸Œë¡œë“œìºìŠ¤íŠ¸)
   â†“
7. ğŸ†• ì¶œê¸ˆ í›„ Hot/Cold ë¹„ìœ¨ ì¬í™•ì¸
   â”œâ”€ Hot < 20% â†’ Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥
   â””â”€ Hot > 20% â†’ Hot â†’ Cold ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥
```

### ë³¼íŠ¸ ë¹„ìœ¨ ìœ ì§€ ì›ì¹™

- **ëª©í‘œ ë¹„ìœ¨**: Hot 20% / Cold 80%
- **í—ˆìš© í¸ì°¨**: Â±5% (Hot 15-25%, Cold 75-85%)
- **ë¦¬ë°¸ëŸ°ì‹± íŠ¸ë¦¬ê±°**: í¸ì°¨ 5% ì´ˆê³¼ ì‹œ ì•Œë¦¼
- **ë¦¬ë°¸ëŸ°ì‹± ë°©ì‹**: ìˆ˜ë™ (ê´€ë¦¬ì ìŠ¹ì¸ í•„ìš”, Air-gap ì„œëª…)

---

## ğŸ“‚ ì¶œê¸ˆ ê´€ë¦¬ ë©”ë‰´ êµ¬ì¡°

### Option A: í”„ë¡œì„¸ìŠ¤ ì¤‘ì‹¬ êµ¬ì¡° (ì¶”ì²œ â­)

ë¹„ì¦ˆë‹ˆìŠ¤ í”Œë¡œìš°ë¥¼ ê·¸ëŒ€ë¡œ ë°˜ì˜í•œ êµ¬ì¡°ë¡œ, ë‹¨ê³„ë³„ ëª…í™•ì„±ê³¼ í™•ì¥ì„±ì´ ìš°ìˆ˜í•©ë‹ˆë‹¤.

```
ğŸ“‚ ì¶œê¸ˆ ê´€ë¦¬ (/admin/withdrawals)
â”œâ”€â”€ ğŸ“Š ëŒ€ì‹œë³´ë“œ              /dashboard ğŸ†•
â”‚   â”œâ”€â”€ ì¶œê¸ˆ í†µê³„ (ëŒ€ê¸°/ì²˜ë¦¬ì¤‘/ì™„ë£Œ)
â”‚   â”œâ”€â”€ Hot/Cold ì”ê³  í˜„í™© (ì‹¤ì‹œê°„)
â”‚   â”œâ”€â”€ ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì•Œë¦¼
â”‚   â””â”€â”€ ìµœê·¼ ì¶œê¸ˆ ë‚´ì—­
â”‚
â”œâ”€â”€ ğŸ“‹ 1. ì¶œê¸ˆ ìš”ì²­ ëŒ€ê¸°ì—´    /queue âœ… (Phase 4 ì™„ë£Œ)
â”‚   â”œâ”€â”€ ìš°ì„ ìˆœìœ„ ìë™ ê³„ì‚°
â”‚   â”œâ”€â”€ ìˆ˜ì‹  ì£¼ì†Œ ê²€ì¦ (íšŒì›ì‚¬ ë“±ë¡ ì£¼ì†Œ)
â”‚   â”œâ”€â”€ ì¼ì¼ í•œë„ ì²´í¬
â”‚   â””â”€â”€ íšŒì›ì‚¬ë³„/ì£¼ì†Œë³„ í•„í„°ë§
â”‚
â”œâ”€â”€ ğŸ›¡ï¸ 2. AML ê²€ì¦          /aml âœ… (Phase 4 ì™„ë£Œ)
â”‚   â”œâ”€â”€ ìë™ ìŠ¤í¬ë¦¬ë‹ (ë¸”ë™ë¦¬ìŠ¤íŠ¸, ì œì¬ ëª©ë¡, PEP)
â”‚   â”œâ”€â”€ ë¦¬ìŠ¤í¬ ì ìˆ˜ ê³„ì‚° (0-100)
â”‚   â”œâ”€â”€ ìˆ˜ë™ ê²€í†  (ë¦¬ìŠ¤í¬ 60+ ë˜ëŠ” 1ì–µì›+)
â”‚   â””â”€â”€ ìŠ¹ì¸/ê±°ë¶€/í”Œë˜ê·¸ ì²˜ë¦¬
â”‚
â”œâ”€â”€ ğŸ¦ 3. ì”ê³  í™•ì¸ ë° ë¦¬ë°¸ëŸ°ì‹± /vault-check ğŸ†• (Phase 5)
â”‚   â”œâ”€â”€ Hot Wallet ì”ê³  ì‹¤ì‹œê°„ ì¡°íšŒ
â”‚   â”œâ”€â”€ ì¶œê¸ˆ ê°€ëŠ¥ ì—¬ë¶€ ìë™ íŒë‹¨
â”‚   â”œâ”€â”€ ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì‹œ ìë™ ì•Œë¦¼
â”‚   â”œâ”€â”€ Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹± ìë™ íŠ¸ë¦¬ê±°
â”‚   â”œâ”€â”€ ì˜ˆìƒ ë¹„ìœ¨ ì‹œë®¬ë ˆì´ì…˜ (ì¶œê¸ˆ ì „í›„)
â”‚   â””â”€â”€ ë¦¬ë°¸ëŸ°ì‹± ì´ë ¥ ì¡°íšŒ
â”‚
â”œâ”€â”€ ğŸ” 4. Air-gap ì„œëª…       /airgap âœ… (Phase 4 ì™„ë£Œ)
â”‚   â”œâ”€â”€ QR ì½”ë“œ ìƒì„± (ì¶œê¸ˆ + ë¦¬ë°¸ëŸ°ì‹±)
â”‚   â”œâ”€â”€ ì˜¤í”„ë¼ì¸ ì„œëª… ìŠ¤ìº”
â”‚   â”œâ”€â”€ ë‹¤ì¤‘ ì„œëª… ìˆ˜ì§‘ (2-of-3, 3-of-5)
â”‚   â”œâ”€â”€ ì„œëª… ì§„í–‰ë¥  ì‹¤ì‹œê°„ í‘œì‹œ
â”‚   â””â”€â”€ ë§Œë£Œ ê´€ë¦¬ (6ì‹œê°„ ì œí•œ)
â”‚
â””â”€â”€ ğŸ“¡ 5. ì¶œê¸ˆ ì‹¤í–‰          /execution âœ… (Phase 4 ì™„ë£Œ)
    â”œâ”€â”€ íŠ¸ëœì­ì…˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸
    â”œâ”€â”€ ì»¨íŒ ì¶”ì  (10ì´ˆë§ˆë‹¤ í´ë§)
    â”œâ”€â”€ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ (RBF ì§€ì›)
    â”œâ”€â”€ ì¶œê¸ˆ í›„ Hot/Cold ë¹„ìœ¨ ì¬í™•ì¸ ğŸ†•
    â””â”€â”€ ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼ ğŸ†•
```

**ì„ íƒ ì´ìœ **:
- âœ… ë¹„ì¦ˆë‹ˆìŠ¤ í”Œë¡œìš°ì™€ ì •í™•íˆ ì¼ì¹˜
- âœ… ë‹¨ê³„ë³„ ì—­í• ì´ ëª…í™•í•˜ê²Œ êµ¬ë¶„ë¨
- âœ… ì‹ ê·œ ê´€ë¦¬ì ì˜¨ë³´ë”© ì‹œ ì´í•´í•˜ê¸° ì‰¬ì›€
- âœ… í–¥í›„ ë‹¨ê³„ ì¶”ê°€ ì‹œ í™•ì¥ ìš©ì´

### Option B: ìƒíƒœ ì¤‘ì‹¬ êµ¬ì¡°

ê´€ë¦¬ìì˜ ì‘ì—… íš¨ìœ¨ì„±ì— ì´ˆì ì„ ë§ì¶˜ êµ¬ì¡°ì…ë‹ˆë‹¤.

```
ğŸ“‚ ì¶œê¸ˆ ê´€ë¦¬ (/admin/withdrawals)
â”œâ”€â”€ ğŸ“Š í†µí•© ëŒ€ì‹œë³´ë“œ          /dashboard ğŸ†•
â”‚   â””â”€â”€ ëª¨ë“  ìƒíƒœì˜ ì¶œê¸ˆ ìš”ì²­ í•œëˆˆì— ë³´ê¸°
â”‚
â”œâ”€â”€ â³ ëŒ€ê¸° ì¤‘               /pending ğŸ†•
â”‚   â”œâ”€â”€ ì¶œê¸ˆ ìš”ì²­ ëŒ€ê¸° (queue)
â”‚   â””â”€â”€ AML ê²€í†  ëŒ€ê¸° (aml)
â”‚
â”œâ”€â”€ ğŸ¦ ì”ê³  ë¶€ì¡± (ë¦¬ë°¸ëŸ°ì‹±)   /vault-check ğŸ†•
â”‚   â””â”€â”€ Hot ì”ê³  ë¶€ì¡±ìœ¼ë¡œ ë¦¬ë°¸ëŸ°ì‹± í•„ìš”í•œ ì¶œê¸ˆ
â”‚
â”œâ”€â”€ ğŸ” ì„œëª… ëŒ€ê¸°             /signing
â”‚   â”œâ”€â”€ ì¶œê¸ˆ ì„œëª… ëŒ€ê¸°
â”‚   â””â”€â”€ ë¦¬ë°¸ëŸ°ì‹± ì„œëª… ëŒ€ê¸°
â”‚
â””â”€â”€ ğŸ“¡ ì‹¤í–‰ ì¤‘ & ì™„ë£Œ        /execution
    â”œâ”€â”€ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì¤‘
    â”œâ”€â”€ ì»¨íŒ ëŒ€ê¸° ì¤‘
    â””â”€â”€ ì™„ë£Œëœ ì¶œê¸ˆ
```

---

## ğŸ”„ ì „ì²´ ì¶œê¸ˆ ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ì¶œê¸ˆ ìš”ì²­ ì ‘ìˆ˜ (/admin/withdrawals/queue)       â”‚
â”‚                                                           â”‚
â”‚ âœ“ íšŒì›ì‚¬ ì¶œê¸ˆ ìš”ì²­ ìˆ˜ì‹                                    â”‚
â”‚ âœ“ ìš°ì„ ìˆœìœ„ ìë™ ê³„ì‚° (ê¸´ê¸‰/ì¼ë°˜/ë‚®ìŒ)                     â”‚
â”‚ âœ“ ìˆ˜ì‹  ì£¼ì†Œ ê²€ì¦ (íšŒì›ì‚¬ ë“±ë¡ ì£¼ì†Œ í™•ì¸)                   â”‚
â”‚ âœ“ ì¼ì¼ í•œë„ ì²´í¬ (ê°œì¸ ì§€ê°‘: 100ë§Œì›)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: AML ê²€ì¦ (/admin/withdrawals/aml)               â”‚
â”‚                                                           â”‚
â”‚ âœ“ ìë™ ìŠ¤í¬ë¦¬ë‹ (ë¸”ë™ë¦¬ìŠ¤íŠ¸, ì œì¬ ëª©ë¡, PEP)              â”‚
â”‚ âœ“ ë¦¬ìŠ¤í¬ ì ìˆ˜ ê³„ì‚° (0-100)                               â”‚
â”‚ âœ“ ìˆ˜ë™ ê²€í†  (ë¦¬ìŠ¤í¬ 60+ ë˜ëŠ” 1ì–µì›+)                     â”‚
â”‚ âœ“ ìŠ¹ì¸/ê±°ë¶€/í”Œë˜ê·¸ ì²˜ë¦¬                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ğŸ†• Hot/Cold ì”ê³  í™•ì¸ ë° ë¦¬ë°¸ëŸ°ì‹±                â”‚
â”‚         (/admin/withdrawals/vault-check)                 â”‚
â”‚                                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ Hot Wallet ì”ê³  í™•ì¸                             â”‚     â”‚
â”‚ â”‚ - í˜„ì¬ ì”ì•¡: 10 BTC                              â”‚     â”‚
â”‚ â”‚ - ì¶œê¸ˆ ìš”ì²­: 8 BTC                               â”‚     â”‚
â”‚ â”‚ - ì˜ˆì•½ ì¤‘: 1 BTC                                 â”‚     â”‚
â”‚ â”‚ - ì¶œê¸ˆ ê°€ëŠ¥: 1 BTC (ë¶€ì¡±!)                       â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    â†“                                      â”‚
â”‚         Hot ì”ê³  ì¶©ë¶„?                                    â”‚
â”‚            â†™              â†˜                              â”‚
â”‚    âœ… ì¶©ë¶„ (1 BTC â‰¥ 8 BTC)  âŒ ë¶€ì¡± (1 BTC < 8 BTC)     â”‚
â”‚       â†“                        â†“                         â”‚
â”‚  Step 4ë¡œ ì´ë™      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                     â”‚ Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹±   â”‚            â”‚
â”‚                     â”‚                       â”‚            â”‚
â”‚                     â”‚ 1. í•„ìš” ê¸ˆì•¡ ê³„ì‚°     â”‚            â”‚
â”‚                     â”‚    ë¶€ì¡±: 7 BTC        â”‚            â”‚
â”‚                     â”‚    ì•ˆì „ ë§ˆì§„: +20%    â”‚            â”‚
â”‚                     â”‚    ì´ì²´ ê¸ˆì•¡: 8.4 BTC â”‚            â”‚
â”‚                     â”‚                       â”‚            â”‚
â”‚                     â”‚ 2. Air-gap ì„œëª… í•„ìš”  â”‚            â”‚
â”‚                     â”‚    ì„œëª… ìœ í˜•: ë¦¬ë°¸ëŸ°ì‹±â”‚            â”‚
â”‚                     â”‚    ìš°ì„ ìˆœìœ„: ê¸´ê¸‰     â”‚            â”‚
â”‚                     â”‚                       â”‚            â”‚
â”‚                     â”‚ 3. Cold â†’ Hot ì´ì²´    â”‚            â”‚
â”‚                     â”‚    ìƒíƒœ: ì§„í–‰ ì¤‘...   â”‚            â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                              â†“                           â”‚
â”‚                     ë¦¬ë°¸ëŸ°ì‹± ì™„ë£Œ í›„                      â”‚
â”‚                     ë‹¤ì‹œ Step 3 ì‹¤í–‰                      â”‚
â”‚                     (ì´ë²ˆì—” ì¶©ë¶„í•¨ â†’ Step 4)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Air-gap ì„œëª… (/admin/withdrawals/airgap)        â”‚
â”‚                                                           â”‚
â”‚ âœ“ QR ì½”ë“œ ìƒì„± (íŠ¸ëœì­ì…˜ ì •ë³´)                            â”‚
â”‚ âœ“ ì˜¤í”„ë¼ì¸ ì„œëª… ì¥ì¹˜ë¡œ ì „ì†¡                               â”‚
â”‚ âœ“ ë‹¤ì¤‘ ì„œëª… ìˆ˜ì§‘ (2-of-3, 3-of-5)                        â”‚
â”‚ âœ“ ì„œëª… ê²€ì¦ ë° ì™„ë£Œ                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: ì¶œê¸ˆ ì‹¤í–‰ (/admin/withdrawals/execution)        â”‚
â”‚                                                           â”‚
â”‚ âœ“ íŠ¸ëœì­ì…˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸                                   â”‚
â”‚ âœ“ ì»¨íŒ ì¶”ì  (ëª©í‘œ ì»¨íŒ ìˆ˜ê¹Œì§€ ëª¨ë‹ˆí„°ë§)                   â”‚
â”‚ âœ“ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ (RBF ì§€ì›)                              â”‚
â”‚ âœ“ ì™„ë£Œ ì•Œë¦¼ (Toast + Email)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: ğŸ†• ì¶œê¸ˆ í›„ ë¦¬ë°¸ëŸ°ì‹± ì²´í¬                         â”‚
â”‚                                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ Hot/Cold ë¹„ìœ¨ ì¬ê³„ì‚°                             â”‚     â”‚
â”‚ â”‚ - ì¶œê¸ˆ ì „: Hot 25% / Cold 75%                   â”‚     â”‚
â”‚ â”‚ - ì¶œê¸ˆ í›„: Hot 18% / Cold 82%                   â”‚     â”‚
â”‚ â”‚ - ëª©í‘œ: Hot 20% / Cold 80%                      â”‚     â”‚
â”‚ â”‚ - í¸ì°¨: -2% (í—ˆìš© ë²”ìœ„ ë‚´)                       â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    â†“                                      â”‚
â”‚         í¸ì°¨ 5% ì´ˆê³¼?                                     â”‚
â”‚            â†™              â†˜                              â”‚
â”‚    âŒ ì •ìƒ (Â±5% ì´ë‚´)    âœ… ë¦¬ë°¸ëŸ°ì‹± í•„ìš” (Â±5% ì´ˆê³¼)     â”‚
â”‚       â†“                        â†“                         â”‚
â”‚  ì¶œê¸ˆ ì™„ë£Œ           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                     â”‚ ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼     â”‚            â”‚
â”‚                     â”‚                       â”‚            â”‚
â”‚                     â”‚ - Hot < 20%:          â”‚            â”‚
â”‚                     â”‚   Cold â†’ Hot ê¶Œì¥     â”‚            â”‚
â”‚                     â”‚                       â”‚            â”‚
â”‚                     â”‚ - Hot > 20%:          â”‚            â”‚
â”‚                     â”‚   Hot â†’ Cold ê¶Œì¥     â”‚            â”‚
â”‚                     â”‚                       â”‚            â”‚
â”‚                     â”‚ ê´€ë¦¬ì ì„ íƒ:          â”‚            â”‚
â”‚                     â”‚ [ì§€ê¸ˆ ë¦¬ë°¸ëŸ°ì‹±]        â”‚            â”‚
â”‚                     â”‚ [ë‚˜ì¤‘ì—]              â”‚            â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ†• Phase 5 êµ¬í˜„ ìƒì„¸

### Phase 5.1: Hot/Cold ì”ê³  ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

**í˜ì´ì§€ ê²½ë¡œ**: `/admin/withdrawals/vault-check`

**íƒ€ì… ì •ì˜**:

```typescript
// /src/types/vault.tsì— ì¶”ê°€

/**
 * ì¶œê¸ˆ ì „ ë³¼íŠ¸ ì²´í¬ ê²°ê³¼
 */
interface VaultCheckBeforeWithdrawal {
  withdrawalId: string;
  requestedAmount: string;
  requestedCurrency: Currency;
  checkedAt: Date;

  // Hot Wallet ìƒíƒœ
  hotWallet: {
    currentBalance: string; // í˜„ì¬ ì´ ì”ì•¡
    reservedAmount: string; // ì˜ˆì•½ëœ ê¸ˆì•¡ (ë‹¤ë¥¸ ì¶œê¸ˆ ëŒ€ê¸° ì¤‘)
    availableBalance: string; // ì¶œê¸ˆ ê°€ëŠ¥ ì”ì•¡ = í˜„ì¬ - ì˜ˆì•½
    isEnough: boolean; // ì¶œê¸ˆ ê°€ëŠ¥ ì—¬ë¶€
    shortfall?: string; // ë¶€ì¡± ê¸ˆì•¡ (ë¶€ì¡±í•œ ê²½ìš°ë§Œ)
  };

  // Cold Wallet ìƒíƒœ
  coldWallet: {
    currentBalance: string;
    availableBalance: string; // ë¦¬ë°¸ëŸ°ì‹± ê°€ëŠ¥ ì”ì•¡
  };

  // ë¦¬ë°¸ëŸ°ì‹± ì •ë³´
  rebalancing: {
    required: boolean; // ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì—¬ë¶€
    amount: string; // Cold â†’ Hot ì´ì²´ í•„ìš” ê¸ˆì•¡
    amountWithMargin: string; // ì•ˆì „ ë§ˆì§„ í¬í•¨ (+20%)
    reason: "insufficient_hot" | "maintain_ratio";
    estimatedTime: string; // Air-gap ì„œëª… ì†Œìš” ì‹œê°„ (ì˜ˆ: "30ë¶„")
    priority: "urgent" | "normal"; // ìš°ì„ ìˆœìœ„
  };

  // ì¶œê¸ˆ í›„ ì˜ˆìƒ ìƒíƒœ
  afterWithdrawal: {
    hotBalance: string; // ì¶œê¸ˆ í›„ Hot ì”ì•¡
    coldBalance: string; // ì¶œê¸ˆ í›„ Cold ì”ì•¡
    hotRatio: number; // ì¶œê¸ˆ í›„ ì˜ˆìƒ Hot ë¹„ìœ¨ (%)
    coldRatio: number; // ì¶œê¸ˆ í›„ ì˜ˆìƒ Cold ë¹„ìœ¨ (%)
    needsRebalancing: boolean; // ì¶œê¸ˆ í›„ ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì—¬ë¶€
    deviation: number; // ëª©í‘œ ë¹„ìœ¨ê³¼ì˜ í¸ì°¨ (%)
  };
}

/**
 * ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼
 */
interface RebalancingRecommendation {
  recommendationId: string;
  triggeredBy: "withdrawal" | "manual_check" | "scheduled";
  triggeredAt: Date;

  currentStatus: {
    hotBalance: string;
    coldBalance: string;
    hotRatio: number; // í˜„ì¬ Hot ë¹„ìœ¨
    coldRatio: number; // í˜„ì¬ Cold ë¹„ìœ¨
    totalValue: string; // ì „ì²´ ìì‚° ê°€ì¹˜
  };

  targetStatus: {
    hotRatio: number; // ëª©í‘œ Hot ë¹„ìœ¨ (20%)
    coldRatio: number; // ëª©í‘œ Cold ë¹„ìœ¨ (80%)
  };

  recommendation: {
    action: "cold_to_hot" | "hot_to_cold" | "none";
    amount: string; // ì´ì²´ ê¶Œì¥ ê¸ˆì•¡
    reason: string; // ê¶Œì¥ ì‚¬ìœ 
    priority: "high" | "medium" | "low";
  };

  actions: {
    autoTrigger: boolean; // ìë™ íŠ¸ë¦¬ê±° ê°€ëŠ¥ ì—¬ë¶€
    requiresApproval: boolean; // ìŠ¹ì¸ í•„ìš” ì—¬ë¶€
    requiresAirGapSigning: boolean; // Air-gap ì„œëª… í•„ìš” ì—¬ë¶€
  };
}
```

**UI ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°**:

```tsx
// /src/app/admin/withdrawals/vault-check/page.tsx

export default function VaultCheckPage() {
  return (
    <div className="space-y-6">
      {/* 1. í†µê³„ ì¹´ë“œ */}
      <VaultCheckStats />

      {/* 2. Hot/Cold ì”ê³  í˜„í™© */}
      <VaultBalanceOverview />

      {/* 3. ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì¶œê¸ˆ ëª©ë¡ */}
      <RebalancingRequiredWithdrawals />

      {/* 4. ë¦¬ë°¸ëŸ°ì‹± ì´ë ¥ */}
      <RebalancingHistory />
    </div>
  );
}

// 1. í†µê³„ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
function VaultCheckStats() {
  // 4ê°œ í†µê³„ ì¹´ë“œ
  // - Hot ì¶©ë¶„: Xê±´
  // - ë¦¬ë°¸ëŸ°ì‹± í•„ìš”: Xê±´
  // - ë¦¬ë°¸ëŸ°ì‹± ì§„í–‰ ì¤‘: Xê±´
  // - ì˜¤ëŠ˜ ë¦¬ë°¸ëŸ°ì‹± ì™„ë£Œ: Xê±´
}

// 2. Hot/Cold ì”ê³  í˜„í™© ì»´í¬ë„ŒíŠ¸
function VaultBalanceOverview() {
  // - í˜„ì¬ Hot/Cold ë¹„ìœ¨ ì°¨íŠ¸
  // - ëª©í‘œ ë¹„ìœ¨ ëŒ€ë¹„ í¸ì°¨ í‘œì‹œ
  // - ìì‚°ë³„ Hot/Cold ë¶„í¬
  // - ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼ (í¸ì°¨ 5% ì´ˆê³¼ ì‹œ)
}

// 3. ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì¶œê¸ˆ ëª©ë¡
function RebalancingRequiredWithdrawals() {
  // í…Œì´ë¸” í˜•íƒœ
  // - ì¶œê¸ˆ ID
  // - íšŒì›ì‚¬
  // - ìì‚° & ê¸ˆì•¡
  // - Hot ë¶€ì¡± ê¸ˆì•¡
  // - í•„ìš” ë¦¬ë°¸ëŸ°ì‹± ê¸ˆì•¡
  // - ìš°ì„ ìˆœìœ„
  // - [ë¦¬ë°¸ëŸ°ì‹± ì‹œì‘] ë²„íŠ¼
}
```

**API í•¨ìˆ˜**:

```typescript
// /src/services/vaultApi.tsì— ì¶”ê°€

/**
 * ì¶œê¸ˆ ì „ ë³¼íŠ¸ ì²´í¬
 */
export async function checkVaultBeforeWithdrawal(
  withdrawalId: string
): Promise<VaultCheckBeforeWithdrawal> {
  // 1. ì¶œê¸ˆ ì •ë³´ ì¡°íšŒ
  const withdrawal = await getWithdrawalRequest(withdrawalId);

  // 2. Hot/Cold ì”ê³  ì¡°íšŒ
  const vaultStatus = await getVaultStatus();

  // 3. ì¶œê¸ˆ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
  const hotAvailable = calculateAvailableBalance(
    vaultStatus.hotWallet.balance,
    vaultStatus.hotWallet.reserved
  );

  const isEnough = hotAvailable >= withdrawal.amount;

  // 4. ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì‹œ ê³„ì‚°
  let rebalancing = null;
  if (!isEnough) {
    const shortfall = withdrawal.amount - hotAvailable;
    const margin = shortfall * 0.2; // 20% ì•ˆì „ ë§ˆì§„
    rebalancing = {
      required: true,
      amount: shortfall.toString(),
      amountWithMargin: (shortfall + margin).toString(),
      reason: "insufficient_hot",
      estimatedTime: "30ë¶„",
      priority: withdrawal.priority === "urgent" ? "urgent" : "normal",
    };
  }

  // 5. ì¶œê¸ˆ í›„ ì˜ˆìƒ ìƒíƒœ ê³„ì‚°
  const afterWithdrawal = calculateAfterWithdrawalStatus(
    vaultStatus,
    withdrawal.amount
  );

  return {
    withdrawalId,
    requestedAmount: withdrawal.amount,
    requestedCurrency: withdrawal.currency,
    checkedAt: new Date(),
    hotWallet: {
      currentBalance: vaultStatus.hotWallet.balance,
      reservedAmount: vaultStatus.hotWallet.reserved,
      availableBalance: hotAvailable.toString(),
      isEnough,
      shortfall: !isEnough ? (withdrawal.amount - hotAvailable).toString() : undefined,
    },
    coldWallet: {
      currentBalance: vaultStatus.coldWallet.balance,
      availableBalance: vaultStatus.coldWallet.balance, // ColdëŠ” ì „ì•¡ ì‚¬ìš© ê°€ëŠ¥
    },
    rebalancing,
    afterWithdrawal,
  };
}

/**
 * ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì²´í¬
 */
export async function checkRebalancingRecommendation(): Promise<RebalancingRecommendation> {
  const vaultStatus = await getVaultStatus();
  const deviation = Math.abs(vaultStatus.balanceStatus.hotRatio - 20);

  let action: "cold_to_hot" | "hot_to_cold" | "none" = "none";
  let amount = "0";
  let priority: "high" | "medium" | "low" = "low";

  if (deviation > 5) {
    if (vaultStatus.balanceStatus.hotRatio < 20) {
      action = "cold_to_hot";
      // ëª©í‘œ 20%ë¡œ ë§ì¶”ê¸° ìœ„í•œ ì´ì²´ ê¸ˆì•¡ ê³„ì‚°
      const targetHot = vaultStatus.totalValue * 0.2;
      amount = (targetHot - vaultStatus.hotWallet.balance).toString();
    } else {
      action = "hot_to_cold";
      const targetHot = vaultStatus.totalValue * 0.2;
      amount = (vaultStatus.hotWallet.balance - targetHot).toString();
    }

    priority = deviation > 10 ? "high" : "medium";
  }

  return {
    recommendationId: generateId(),
    triggeredBy: "manual_check",
    triggeredAt: new Date(),
    currentStatus: {
      hotBalance: vaultStatus.hotWallet.balance,
      coldBalance: vaultStatus.coldWallet.balance,
      hotRatio: vaultStatus.balanceStatus.hotRatio,
      coldRatio: vaultStatus.balanceStatus.coldRatio,
      totalValue: vaultStatus.totalValue,
    },
    targetStatus: {
      hotRatio: 20,
      coldRatio: 80,
    },
    recommendation: {
      action,
      amount,
      reason: `í˜„ì¬ Hot ë¹„ìœ¨ ${vaultStatus.balanceStatus.hotRatio}% (ëª©í‘œ 20%)`,
      priority,
    },
    actions: {
      autoTrigger: false, // ìˆ˜ë™ ìŠ¹ì¸ í•„ìš”
      requiresApproval: true,
      requiresAirGapSigning: true,
    },
  };
}

/**
 * ë¦¬ë°¸ëŸ°ì‹± ìë™ íŠ¸ë¦¬ê±°
 */
export async function triggerRebalancing(
  amount: string,
  currency: Currency,
  direction: "cold_to_hot" | "hot_to_cold",
  reason: string
): Promise<{ airGapRequestId: string }> {
  // 1. Air-gap ì„œëª… ìš”ì²­ ìƒì„±
  const airGapRequest = await createAirGapRequest({
    type: "rebalancing",
    amount,
    currency,
    fromWallet: direction === "cold_to_hot" ? "cold" : "hot",
    toWallet: direction === "cold_to_hot" ? "hot" : "cold",
    reason,
    priority: "urgent",
  });

  // 2. ë¦¬ë°¸ëŸ°ì‹± ì´ë ¥ ê¸°ë¡
  await recordRebalancingHistory({
    direction,
    amount,
    currency,
    reason,
    airGapRequestId: airGapRequest.id,
    status: "pending",
  });

  return { airGapRequestId: airGapRequest.id };
}
```

---

### Phase 5.2: ì¶œê¸ˆ ì „ Hot ì”ê³  ìë™ ì²´í¬ ì‹œìŠ¤í…œ

**í†µí•© ì§€ì **: `/admin/withdrawals/queue` â†’ AML ìŠ¹ì¸ í›„ ìë™ ì‹¤í–‰

**ì›Œí¬í”Œë¡œìš° í†µí•©**:

```typescript
// /src/app/admin/withdrawals/queue/page.tsx ìˆ˜ì •

async function handleApproveWithdrawal(withdrawalId: string) {
  try {
    // 1. AML ìŠ¹ì¸
    await approveWithdrawalAML(withdrawalId);

    // 2. ğŸ†• Hot ì”ê³  ìë™ ì²´í¬
    const vaultCheck = await checkVaultBeforeWithdrawal(withdrawalId);

    if (vaultCheck.rebalancing?.required) {
      // 3. ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì•Œë¦¼ ëª¨ë‹¬
      setRebalancingAlert({
        show: true,
        withdrawalId,
        shortfall: vaultCheck.hotWallet.shortfall!,
        rebalancingAmount: vaultCheck.rebalancing.amountWithMargin,
        estimatedTime: vaultCheck.rebalancing.estimatedTime,
        priority: vaultCheck.rebalancing.priority,
      });
    } else {
      // 4. Hot ì¶©ë¶„ â†’ Air-gap ì„œëª…ìœ¼ë¡œ ìë™ ì´ë™
      toast.success("ì¶œê¸ˆ ìŠ¹ì¸ ì™„ë£Œ. Air-gap ì„œëª… ëŒ€ê¸°ì—´ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
      router.push(`/admin/withdrawals/airgap?highlight=${withdrawalId}`);
    }
  } catch (error) {
    toast.error("ìŠ¹ì¸ ì²˜ë¦¬ ì‹¤íŒ¨");
  }
}

// ë¦¬ë°¸ëŸ°ì‹± ì•Œë¦¼ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
function RebalancingAlertModal({ alert, onClose }: Props) {
  const handleStartRebalancing = async () => {
    // ìë™ ë¦¬ë°¸ëŸ°ì‹± íŠ¸ë¦¬ê±°
    const { airGapRequestId } = await triggerRebalancing(
      alert.rebalancingAmount,
      "BTC", // ë˜ëŠ” ë™ì ìœ¼ë¡œ
      "cold_to_hot",
      `ì¶œê¸ˆ ${alert.withdrawalId}ë¥¼ ìœ„í•œ ë¦¬ë°¸ëŸ°ì‹±`
    );

    toast.success("ë¦¬ë°¸ëŸ°ì‹± Air-gap ì„œëª…ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
    router.push(`/admin/withdrawals/airgap?highlight=${airGapRequestId}`);
  };

  return (
    <Dialog open={alert.show} onOpenChange={onClose}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>ë¦¬ë°¸ëŸ°ì‹± í•„ìš”</DialogTitle>
          <DialogDescription>
            Hot Wallet ì”ê³ ê°€ ë¶€ì¡±í•˜ì—¬ ì¶œê¸ˆì„ ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
          </DialogDescription>
        </DialogHeader>

        <div className="space-y-4">
          <div>
            <p className="text-sm text-muted-foreground">ë¶€ì¡± ê¸ˆì•¡</p>
            <p className="text-lg font-semibold">{alert.shortfall}</p>
          </div>

          <div>
            <p className="text-sm text-muted-foreground">
              í•„ìš” ë¦¬ë°¸ëŸ°ì‹± ê¸ˆì•¡ (ì•ˆì „ ë§ˆì§„ +20%)
            </p>
            <p className="text-lg font-semibold">{alert.rebalancingAmount}</p>
          </div>

          <div>
            <p className="text-sm text-muted-foreground">ì˜ˆìƒ ì†Œìš” ì‹œê°„</p>
            <p className="text-lg font-semibold">{alert.estimatedTime}</p>
          </div>
        </div>

        <DialogFooter>
          <Button variant="outline" onClick={onClose}>
            ë‚˜ì¤‘ì—
          </Button>
          <Button
            variant="sapphire"
            onClick={handleStartRebalancing}
            className="gap-2"
          >
            <RefreshCcw className="w-4 h-4" />
            ì§€ê¸ˆ ë¦¬ë°¸ëŸ°ì‹± ì‹œì‘
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

---

### Phase 5.3: Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹± ìë™ íŠ¸ë¦¬ê±°

**ê¸°ëŠ¥ ì„¤ëª…**:
- ë¦¬ë°¸ëŸ°ì‹±ë„ Air-gap ì„œëª… í•„ìš” (ë³´ì•ˆ ì •ì±…)
- ì¶œê¸ˆê³¼ ë™ì¼í•œ ì„œëª… í”„ë¡œì„¸ìŠ¤ ì‚¬ìš©
- ì„œëª… ìœ í˜•: `rebalancing` (ê¸°ì¡´ `withdrawal`ê³¼ êµ¬ë¶„)

**Air-gap ì„œëª… ìš”ì²­ íƒ€ì… í™•ì¥**:

```typescript
// /src/types/vault.ts ìˆ˜ì •

type AirGapSigningType =
  | "withdrawal"          // ì¶œê¸ˆ
  | "rebalancing"         // ë¦¬ë°¸ëŸ°ì‹±
  | "emergency_withdrawal" // ê¸´ê¸‰ ì¶œê¸ˆ
  | "maintenance";        // ìœ ì§€ë³´ìˆ˜

interface AirGapSigningRequest {
  id: string;
  type: AirGapSigningType; // íƒ€ì… í™•ì¥
  // ... ë‚˜ë¨¸ì§€ í•„ë“œ

  // ğŸ†• ë¦¬ë°¸ëŸ°ì‹± ì „ìš© í•„ë“œ
  rebalancingInfo?: {
    direction: "cold_to_hot" | "hot_to_cold";
    fromWallet: "hot" | "cold";
    toWallet: "hot" | "cold";
    reason: string; // ë¦¬ë°¸ëŸ°ì‹± ì‚¬ìœ 
    relatedWithdrawalId?: string; // ê´€ë ¨ ì¶œê¸ˆ ID (ì¶œê¸ˆ ë•Œë¬¸ì— ë¦¬ë°¸ëŸ°ì‹±í•œ ê²½ìš°)
  };
}
```

**ë¦¬ë°¸ëŸ°ì‹± ìë™ íŠ¸ë¦¬ê±° íë¦„**:

```typescript
// /src/services/vaultApi.ts

export async function triggerRebalancing(
  amount: string,
  currency: Currency,
  direction: "cold_to_hot" | "hot_to_cold",
  reason: string,
  relatedWithdrawalId?: string
): Promise<{ airGapRequestId: string }> {
  // 1. Air-gap ì„œëª… ìš”ì²­ ìƒì„±
  const airGapRequest: AirGapSigningRequest = {
    id: generateId(),
    type: "rebalancing",
    status: "pending",
    priority: relatedWithdrawalId ? "urgent" : "normal", // ì¶œê¸ˆ ê´€ë ¨ì´ë©´ ê¸´ê¸‰
    requiredSignatures: 2,
    collectedSignatures: 0,
    signers: [
      { name: "Admin 1", publicKey: "...", hasSigned: false },
      { name: "Admin 2", publicKey: "...", hasSigned: false },
      { name: "Admin 3", publicKey: "...", hasSigned: false },
    ],
    transactionData: {
      currency,
      amount,
      fromAddress: direction === "cold_to_hot" ? "Cold Wallet" : "Hot Wallet",
      toAddress: direction === "cold_to_hot" ? "Hot Wallet" : "Cold Wallet",
      networkFee: "0.0001", // ì˜ˆì‹œ
    },
    rebalancingInfo: {
      direction,
      fromWallet: direction === "cold_to_hot" ? "cold" : "hot",
      toWallet: direction === "cold_to_hot" ? "hot" : "cold",
      reason,
      relatedWithdrawalId,
    },
    createdAt: new Date(),
    expiresAt: new Date(Date.now() + 6 * 60 * 60 * 1000), // 6ì‹œê°„ í›„
  };

  // 2. LocalStorageì— ì €ì¥
  await saveAirGapRequest(airGapRequest);

  // 3. ë¦¬ë°¸ëŸ°ì‹± ì´ë ¥ ê¸°ë¡
  await recordRebalancingHistory({
    id: generateId(),
    direction,
    amount,
    currency,
    reason,
    airGapRequestId: airGapRequest.id,
    status: "pending",
    createdAt: new Date(),
  });

  return { airGapRequestId: airGapRequest.id };
}
```

---

### Phase 5.4: ì¶œê¸ˆ í›„ Hot/Cold ë¹„ìœ¨ ì¬í™•ì¸ ë° ë¦¬ë°¸ëŸ°ì‹± ì•Œë¦¼

**í†µí•© ì§€ì **: `/admin/withdrawals/execution` â†’ ì¶œê¸ˆ ì™„ë£Œ í›„ ìë™ ì‹¤í–‰

**ì›Œí¬í”Œë¡œìš° í†µí•©**:

```typescript
// /src/services/executionApi.ts ìˆ˜ì •

export async function onWithdrawalCompleted(executionId: string) {
  // 1. ì¶œê¸ˆ ì‹¤í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸
  await updateExecutionStatus(executionId, "completed");

  // 2. ğŸ†• Hot/Cold ë¹„ìœ¨ ì¬í™•ì¸
  const vaultStatus = await getVaultStatus();
  const deviation = Math.abs(vaultStatus.balanceStatus.hotRatio - 20);

  if (deviation > 5) {
    // 3. ëª©í‘œ ë¹„ìœ¨ê³¼ 5% ì´ìƒ ì°¨ì´ë‚˜ë©´ ì•Œë¦¼
    const recommendation = await checkRebalancingRecommendation();

    // 4. ì•Œë¦¼ ìƒì„±
    await createNotification({
      type: "rebalancing_recommended",
      priority: recommendation.recommendation.priority === "high" ? "urgent" : "warning",
      title: "ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥",
      message: `ì¶œê¸ˆ ì™„ë£Œ í›„ Hot ë¹„ìœ¨ ${vaultStatus.balanceStatus.hotRatio}% (ëª©í‘œ 20%)`,
      data: recommendation,
      createdAt: new Date(),
    });

    // 5. Toast ì•Œë¦¼
    toast.info("ì¶œê¸ˆ ì™„ë£Œ í›„ ë¦¬ë°¸ëŸ°ì‹±ì´ ê¶Œì¥ë©ë‹ˆë‹¤. ë³¼íŠ¸ ê´€ë¦¬ í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
  }

  // 6. ì™„ë£Œ ì•Œë¦¼ ë°œì†¡ (ê¸°ì¡´)
  await sendCompletionNotification(executionId);
}
```

**ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼ UI**:

```tsx
// /src/app/admin/withdrawals/execution/page.tsxì— ì¶”ê°€

function RebalancingRecommendationBanner({ recommendation }: Props) {
  if (!recommendation || recommendation.recommendation.action === "none") {
    return null;
  }

  const actionText =
    recommendation.recommendation.action === "cold_to_hot"
      ? "Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹±"
      : "Hot â†’ Cold ë¦¬ë°¸ëŸ°ì‹±";

  const priorityColor = {
    high: "bg-red-100 border-red-500 text-red-900",
    medium: "bg-yellow-100 border-yellow-500 text-yellow-900",
    low: "bg-blue-100 border-blue-500 text-blue-900",
  }[recommendation.recommendation.priority];

  return (
    <div className={`border-l-4 p-4 ${priorityColor} rounded-lg`}>
      <div className="flex items-start justify-between">
        <div className="flex-1">
          <h3 className="font-semibold">ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥</h3>
          <p className="text-sm mt-1">{recommendation.recommendation.reason}</p>
          <p className="text-sm mt-2">
            ê¶Œì¥ ì´ì²´ ê¸ˆì•¡: <span className="font-semibold">
              {recommendation.recommendation.amount} BTC
            </span>
          </p>
        </div>

        <div className="flex gap-2">
          <Button
            variant="outline"
            size="sm"
            onClick={() => {/* ë‚˜ì¤‘ì— ì²˜ë¦¬ */}}
          >
            ë‚˜ì¤‘ì—
          </Button>
          <Button
            variant="sapphire"
            size="sm"
            onClick={() => router.push("/admin/vault/rebalancing")}
            className="gap-2"
          >
            <RefreshCcw className="w-4 h-4" />
            {actionText}
          </Button>
        </div>
      </div>
    </div>
  );
}
```

---

### Phase 5.5: ìˆ˜ë™ ë¦¬ë°¸ëŸ°ì‹± ë„êµ¬ UI

**í˜ì´ì§€ ê²½ë¡œ**: `/admin/vault/rebalancing`

**UI êµ¬ì¡°**:

```tsx
// /src/app/admin/vault/rebalancing/page.tsx

export default function RebalancingPage() {
  return (
    <div className="space-y-6">
      {/* 1. í˜„ì¬ Hot/Cold ë¹„ìœ¨ */}
      <CurrentRatioCard />

      {/* 2. ë¦¬ë°¸ëŸ°ì‹± ê³„ì‚°ê¸° */}
      <RebalancingCalculator />

      {/* 3. ë¦¬ë°¸ëŸ°ì‹± ì´ë ¥ */}
      <RebalancingHistoryTable />
    </div>
  );
}

// 1. í˜„ì¬ Hot/Cold ë¹„ìœ¨ ì¹´ë“œ
function CurrentRatioCard() {
  const { data: vaultStatus } = useVaultStatus();

  return (
    <Card>
      <CardHeader>
        <CardTitle>í˜„ì¬ Hot/Cold ë¹„ìœ¨</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="grid grid-cols-2 gap-4">
          {/* Hot Wallet */}
          <div>
            <p className="text-sm text-muted-foreground">Hot Wallet</p>
            <p className="text-2xl font-bold">
              {vaultStatus?.balanceStatus.hotRatio}%
            </p>
            <p className="text-sm">ëª©í‘œ: 20%</p>
            <Progress
              value={vaultStatus?.balanceStatus.hotRatio}
              className="mt-2"
            />
          </div>

          {/* Cold Wallet */}
          <div>
            <p className="text-sm text-muted-foreground">Cold Wallet</p>
            <p className="text-2xl font-bold">
              {vaultStatus?.balanceStatus.coldRatio}%
            </p>
            <p className="text-sm">ëª©í‘œ: 80%</p>
            <Progress
              value={vaultStatus?.balanceStatus.coldRatio}
              className="mt-2"
            />
          </div>
        </div>

        {/* í¸ì°¨ ê²½ê³  */}
        {vaultStatus?.balanceStatus.deviation > 5 && (
          <div className="mt-4 p-3 bg-yellow-100 border border-yellow-500 rounded-lg">
            <p className="text-sm text-yellow-900">
              ëª©í‘œ ë¹„ìœ¨ê³¼ {vaultStatus.balanceStatus.deviation}% ì°¨ì´ë‚©ë‹ˆë‹¤.
              ë¦¬ë°¸ëŸ°ì‹±ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
            </p>
          </div>
        )}
      </CardContent>
    </Card>
  );
}

// 2. ë¦¬ë°¸ëŸ°ì‹± ê³„ì‚°ê¸°
function RebalancingCalculator() {
  const [direction, setDirection] = useState<"cold_to_hot" | "hot_to_cold">("cold_to_hot");
  const [amount, setAmount] = useState("");
  const [reason, setReason] = useState("");

  const handleStartRebalancing = async () => {
    const { airGapRequestId } = await triggerRebalancing(
      amount,
      "BTC",
      direction,
      reason
    );

    toast.success("ë¦¬ë°¸ëŸ°ì‹± Air-gap ì„œëª…ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
    router.push(`/admin/withdrawals/airgap?highlight=${airGapRequestId}`);
  };

  return (
    <Card>
      <CardHeader>
        <CardTitle>ë¦¬ë°¸ëŸ°ì‹± ì‹¤í–‰</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="space-y-4">
          {/* ë°©í–¥ ì„ íƒ */}
          <div>
            <Label>ë¦¬ë°¸ëŸ°ì‹± ë°©í–¥</Label>
            <RadioGroup value={direction} onValueChange={setDirection}>
              <div className="flex items-center space-x-2">
                <RadioGroupItem value="cold_to_hot" id="cold_to_hot" />
                <Label htmlFor="cold_to_hot">Cold â†’ Hot</Label>
              </div>
              <div className="flex items-center space-x-2">
                <RadioGroupItem value="hot_to_cold" id="hot_to_cold" />
                <Label htmlFor="hot_to_cold">Hot â†’ Cold</Label>
              </div>
            </RadioGroup>
          </div>

          {/* ê¸ˆì•¡ ì…ë ¥ */}
          <div>
            <Label>ì´ì²´ ê¸ˆì•¡ (BTC)</Label>
            <Input
              type="number"
              step="0.00000001"
              value={amount}
              onChange={(e) => setAmount(e.target.value)}
              placeholder="0.00000000"
            />
          </div>

          {/* ì‚¬ìœ  ì…ë ¥ */}
          <div>
            <Label>ë¦¬ë°¸ëŸ°ì‹± ì‚¬ìœ </Label>
            <Textarea
              value={reason}
              onChange={(e) => setReason(e.target.value)}
              placeholder="ë¦¬ë°¸ëŸ°ì‹± ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
            />
          </div>

          {/* ì‹¤í–‰ ë²„íŠ¼ */}
          <Button
            variant="sapphire"
            onClick={handleStartRebalancing}
            disabled={!amount || !reason}
            className="w-full gap-2"
          >
            <RefreshCcw className="w-4 h-4" />
            ë¦¬ë°¸ëŸ°ì‹± ì‹œì‘ (Air-gap ì„œëª… ìƒì„±)
          </Button>
        </div>
      </CardContent>
    </Card>
  );
}
```

---

## ğŸ“Š êµ¬í˜„ ìš°ì„ ìˆœìœ„ ë° ì¼ì •

| ìš°ì„ ìˆœìœ„ | Phase | Task | ì˜ˆìƒ ì†Œìš”ì‹œê°„ | ì˜ì¡´ì„± |
|---------|-------|------|-------------|--------|
| **P0** | 5.1 | Hot/Cold ì”ê³  ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ | 2ì¼ | - |
| **P1** | 5.2 | ì¶œê¸ˆ ì „ Hot ì”ê³  ìë™ ì²´í¬ | 1ì¼ | 5.1 ì™„ë£Œ |
| **P1** | 5.3 | Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹± ìë™ íŠ¸ë¦¬ê±° | 1.5ì¼ | 5.2 ì™„ë£Œ, Air-gap í†µí•© |
| **P2** | 5.4 | ì¶œê¸ˆ í›„ ë¹„ìœ¨ ì¬í™•ì¸ ë° ì•Œë¦¼ | 0.5ì¼ | 5.1 ì™„ë£Œ |
| **P2** | 5.5 | ìˆ˜ë™ ë¦¬ë°¸ëŸ°ì‹± ë„êµ¬ UI | 1ì¼ | 5.1, 5.3 ì™„ë£Œ |

**ì´ ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 6ì¼ (ì•½ 1.2ì£¼)

**êµ¬í˜„ ìˆœì„œ**:
1. Day 1-2: Phase 5.1 (ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ)
2. Day 3: Phase 5.2 (ì¶œê¸ˆ ì „ ì²´í¬)
3. Day 4-5: Phase 5.3 (ìë™ íŠ¸ë¦¬ê±°)
4. Day 5: Phase 5.4 (ì¶œê¸ˆ í›„ ì²´í¬)
5. Day 6: Phase 5.5 (ìˆ˜ë™ ë„êµ¬ UI)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: Hot ì”ê³  ì¶©ë¶„í•œ ê²½ìš°

```
1. ì¶œê¸ˆ ìš”ì²­: 1 BTC
2. Hot ì”ê³ : 5 BTC (ì¶©ë¶„)
3. AML ìŠ¹ì¸ â†’ ì¦‰ì‹œ Air-gap ì„œëª…ìœ¼ë¡œ ì´ë™
4. ì¶œê¸ˆ ì™„ë£Œ í›„ ë¹„ìœ¨ ì²´í¬
   - Hot 18% / Cold 82% (í—ˆìš© ë²”ìœ„ ë‚´)
   - ì•Œë¦¼ ì—†ìŒ
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: Hot ì”ê³  ë¶€ì¡±, ë¦¬ë°¸ëŸ°ì‹± í•„ìš”

```
1. ì¶œê¸ˆ ìš”ì²­: 8 BTC
2. Hot ì”ê³ : 1 BTC (ë¶€ì¡±)
3. AML ìŠ¹ì¸ â†’ Hot ì”ê³  ì²´í¬ â†’ ë¶€ì¡± ê°ì§€
4. ë¦¬ë°¸ëŸ°ì‹± ì•Œë¦¼ ëª¨ë‹¬ í‘œì‹œ
   - ë¶€ì¡± ê¸ˆì•¡: 7 BTC
   - ì•ˆì „ ë§ˆì§„ í¬í•¨: 8.4 BTC
5. [ì§€ê¸ˆ ë¦¬ë°¸ëŸ°ì‹± ì‹œì‘] í´ë¦­
6. Air-gap ì„œëª… ìš”ì²­ ìƒì„± (ë¦¬ë°¸ëŸ°ì‹±)
7. ë¦¬ë°¸ëŸ°ì‹± ì™„ë£Œ í›„ ë‹¤ì‹œ ì¶œê¸ˆ í”„ë¡œì„¸ìŠ¤ ì§„í–‰
8. ì¶œê¸ˆ ì™„ë£Œ í›„ ë¹„ìœ¨ ì²´í¬
   - Hot 15% / Cold 85% (í¸ì°¨ -5%, ê²½ê³„)
   - ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼ í‘œì‹œ
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì¶œê¸ˆ í›„ ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥

```
1. ì¶œê¸ˆ ìš”ì²­: 10 BTC
2. Hot ì”ê³ : 50 BTC (ì¶©ë¶„)
3. ì¶œê¸ˆ ì™„ë£Œ í›„
   - Hot 40 BTC / Cold 160 BTC
   - Hot 16.67% / Cold 83.33% (í¸ì°¨ -3.33%, ì •ìƒ)
4. ì¶”ê°€ ì¶œê¸ˆ ìš”ì²­: 30 BTC
5. ì¶œê¸ˆ ì™„ë£Œ í›„
   - Hot 10 BTC / Cold 160 BTC
   - Hot 5.88% / Cold 94.12% (í¸ì°¨ -14.12%, ì‹¬ê°)
6. ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼
   - Cold â†’ Hot 24 BTC ì´ì²´ ê¶Œì¥
   - ìš°ì„ ìˆœìœ„: High
```

---

## ğŸ“ ì™„ë£Œ ê¸°ì¤€

### Phase 5 ì „ì²´ ì™„ë£Œ ê¸°ì¤€:

- [ ] Hot/Cold ì”ê³  ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ë™ì‘ (`/admin/withdrawals/vault-check`)
- [ ] ì¶œê¸ˆ ì „ Hot ì”ê³  ìë™ ì²´í¬ ì‹œìŠ¤í…œ ë™ì‘
- [ ] ë¦¬ë°¸ëŸ°ì‹± í•„ìš” ì‹œ ìë™ ì•Œë¦¼ ëª¨ë‹¬ í‘œì‹œ
- [ ] Cold â†’ Hot ë¦¬ë°¸ëŸ°ì‹± ìë™ íŠ¸ë¦¬ê±° ë™ì‘
- [ ] Air-gap ì„œëª…ê³¼ ë¦¬ë°¸ëŸ°ì‹± í†µí•© ë™ì‘
- [ ] ì¶œê¸ˆ í›„ Hot/Cold ë¹„ìœ¨ ì¬í™•ì¸ ìë™ ì‹¤í–‰
- [ ] í¸ì°¨ 5% ì´ˆê³¼ ì‹œ ë¦¬ë°¸ëŸ°ì‹± ê¶Œì¥ ì•Œë¦¼
- [ ] ìˆ˜ë™ ë¦¬ë°¸ëŸ°ì‹± ë„êµ¬ UI ë™ì‘ (`/admin/vault/rebalancing`)
- [ ] ë¦¬ë°¸ëŸ°ì‹± ì´ë ¥ ì¡°íšŒ ê¸°ëŠ¥
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ í†µê³¼

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

Phase 5 ì™„ë£Œ í›„:

1. **Phase 6: ì»´í”Œë¼ì´ì–¸ìŠ¤ ë° ë³´ê³ ì„œ** (2ì£¼)
   - ê·œì œ ë³´ê³ ì„œ ìƒì„±
   - Travel Rule ì„¤ì • ê´€ë¦¬
   - AML ì •ì±… ê´€ë¦¬
   - ì˜ì‹¬ ì£¼ì†Œ ê´€ë¦¬
   - STR ë³´ê³  ì‹œìŠ¤í…œ
   - ìš´ì˜ ë³´ê³ ì„œ ìë™í™”
   - ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ (WebSocket)

2. **ìµœì¢… í†µí•© í…ŒìŠ¤íŠ¸**
   - ì „ì²´ í”Œë¡œìš° E2E í…ŒìŠ¤íŠ¸
   - ì„±ëŠ¥ ìµœì í™”
   - ë³´ì•ˆ ê°ì‚¬
   - ì‚¬ìš©ì ë§¤ë‰´ì–¼ ì‘ì„±

---

_ì‘ì„±ì¼: 2025-10-15_
_ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-10-15_
_ì˜ˆìƒ ì™„ë£Œ: Phase 5 (1.2ì£¼) + Phase 6 (2ì£¼) = ì´ 3.2ì£¼_
